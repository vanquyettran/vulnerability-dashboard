import './Popup.less';
import React, {forwardRef} from 'react';
import LayoutPortal from '../document-portal/DocumentPortal';
import Icon from '../icon/Icon';


function Popup({title = null, appearLocally = false, children, close = null}, ref) {

    const renderPopup = () => {
        return (
            <div
                className={[
                    'Popup',
                    appearLocally && 'appear-locally',
                ]}
                ref={ref}
            >
                <div className="overlay">
                    {
                        title ?
                            <>
                                <div className="header">
                                    <div className="title">
                                        {title}
                                    </div>
                                    {
                                        close &&
                                        <button
                                            type="button"
                                            className="popup-close-button"
                                            onClick={() => close()}
                                        >
                                            <Icon name="times"/>
                                        </button>
                                    }
                                </div>
                                <div className="body">
                                    {children}
                                </div>
                            </>
                            :
                            <>
                                {children}
                                {
                                    close &&
                                    <button
                                        type="button"
                                        className="popup-close-button"
                                        onClick={() => close()}
                                    >
                                        <Icon name="times"/>
                                    </button>
                                }
                            </>
                    }
                </div>
            </div>
        );
    };

    if (appearLocally) {
        return renderPopup();
    }

    return <LayoutPortal>
        {renderPopup()}
    </LayoutPortal>;
}


export default forwardRef(Popup);
