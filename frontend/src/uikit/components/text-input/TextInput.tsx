import './TextInput.less';
import React, {useState, forwardRef, Ref} from 'react';

export interface TextInputProps {
    value: string,
    setValue: (value: string) => void,
    onFocus?: React.EventHandler<React.FocusEvent<HTMLInputElement>>,
    onBlur?: React.EventHandler<React.FocusEvent<HTMLInputElement>>,
}

export default forwardRef(function TextInput(
    {
        value,
        setValue,
        onFocus = () => undefined,
        onBlur = () => undefined,
    }: TextInputProps,
    ref: Ref<HTMLDivElement>
) {
    const [focused, setFocused] = useState(false);

    return (
        <div
            className={[
                'TextInput',
                focused && 'focused',
            ]}
            ref={ref}
        >
            <input
                value={value}
                onChange={(ev) => {
                    setValue(ev.target.value);
                }}
                onFocus={(ev) => {
                    setFocused(true);
                    onFocus(ev);
                }}
                onBlur={(ev) => {
                    setFocused(false);
                    onBlur(ev);
                }}
            />
        </div>
    );
})
