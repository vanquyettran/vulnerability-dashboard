import './PageContent.less';
import React, {ReactNode, useContext, useEffect} from 'react';
import {useLocation} from 'react-router-dom';
import MainArea from './main-area/MainArea';
import ErrorBoundary from './error-boundary/ErrorBoundary';
import ErrorContext from 'main/contexts/error/ErrorContext';

export default function PageContent({content}: {content: ReactNode}) {
    const location = useLocation();
    const {error, setError} = useContext(ErrorContext);

    useEffect(() => {
        setError(null);
    }, [location]);

    return (
        <div className="PageContent" key={location.key}>
            {
                error === null
                    ? <MainArea content={content}/>
                    : <ErrorBoundary error={error}/>
            }
        </div>
    );
}
