import AbstractParcel from "../AbstractParcel";
import ResponseResult from 'libs/http-request/ResponseResult';
import ResponseError from 'libs/http-request/ResponseError';
import Card from 'main/models/interfaces/Card';

export default class CardMigrateParcel extends AbstractParcel<{card: Card, posInList: number}> {
    private readonly card: Card;
    private readonly posInList: number;

    constructor({card, posInList}: {card: Card, posInList: number}) {
        super();

        this.card = card;
        this.posInList = posInList;

        // This API was not supported by the backend
        // Make a mockup and request later
        this.setMode('MockSuccessDelay');

        // Uncomment the following line to see how fallback work
        this.setMode('MockFailureDelay');

        // Used for draft update
        this.setExpectedResponseData({card, posInList});
    }

    parseResponseError(response: any) {
        return new ResponseError(response?.message);
    }

    parseResponseResult(response: any) {
        return new ResponseResult({card: this.card, posInList: this.posInList});
    }
}
