import AbstractParcel from "../AbstractParcel";
import ResponseResult from 'libs/http-request/ResponseResult';
import ResponseError from 'libs/http-request/ResponseError';
import Card from 'main/models/interfaces/Card';
import List from 'main/models/interfaces/List';

export default class CardReadParcel extends AbstractParcel<Card> {
    private readonly cardId: Card['id'];
    private readonly listId: List['id'];

    constructor(cardId: Card['id'], listId: List['id']) {
        super();

        this.cardId = cardId;
        this.listId = listId;

        this.setRequestMethod('GET');
        this.setEndpoint(`api/card/${cardId}`);
    }

    parseResponseError(response: any, xhr: XMLHttpRequest) {
        return new ResponseError(response?.message, xhr.status);
    }

    parseResponseResult(response: any) {
        return new ResponseResult({
            id: response.id,
            text: response.text,
            listId: this.listId,
        });
    }
}
