import AbstractParcel from "../AbstractParcel";
import ResponseResult from 'libs/http-request/ResponseResult';
import ResponseError from 'libs/http-request/ResponseError';
import ICard from 'main/interfaces/ICard';

export default class CardListParcel extends AbstractParcel<ICard[]> {
    private readonly listId: string;

    constructor(listId: string) {
        super();

        this.listId = listId;

        this.setEndpoint(`api/list/${listId}/card`);
        this.setRequestMethod('GET');
    }

    parseResponseError(response: any) {
        return new ResponseError(response?.message);
    }

    parseResponseResult(response: any) {
        if (!response) {
            return new ResponseResult(null, new ResponseError());
        }

        return new ResponseResult(response.repos.map((t: {id: string, text: string}) => ({
            id: t.id,
            text: t.text,
            listId: this.listId,
        })));
    }
}
