import AbstractParcel from "../AbstractParcel";
import ResponseResult from 'libs/http-request/ResponseResult';
import ResponseError from 'libs/http-request/ResponseError';
import IRepo from 'main/interfaces/IRepo';

export default class RepoUpdateParcel extends AbstractParcel<IRepo> {
    constructor(repo: IRepo) {
        super();

        this.setEndpoint('api/repo');
        this.setRequestMethod('POST');
        this.setRequestHeader('Content-Type', 'application/json');
        this.setRequestBody(JSON.stringify({
            name: repo.name,
        }));
    }

    parseResponseError(response: any) {
        return new ResponseError(response?.message);
    }

    parseResponseResult(response: any) {
        if (!response) {
            return new ResponseResult(null, new ResponseError());
        }

        return new ResponseResult({
            id: response.id,
            name: response.name,
        });
    }
}
