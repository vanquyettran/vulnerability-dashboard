import AbstractParcel from "../AbstractParcel";
import ResponseResult from 'libs/http-request/ResponseResult';
import ResponseError from 'libs/http-request/ResponseError';
import Repo from 'main/models/interfaces/Repo';

export default class RepoListParcel extends AbstractParcel<Repo[]> {
    constructor() {
        super();

        this.setRequestMethod('GET');
        this.setEndpoint('api/repo');
    }

    parseResponseError(response: any, xhr: XMLHttpRequest) {
        return new ResponseError(response?.message, xhr.status);
    }

    parseResponseResult(response: any) {
        return new ResponseResult(response.repos.map((t: {id: string, name: string}) => ({
            id: t.id,
            name: t.name,
        })));
    }
}
