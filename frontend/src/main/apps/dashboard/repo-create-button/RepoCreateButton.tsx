import './RepoCreateButton.less';
import React, {useRef, useState} from 'react';
import __ from 'main/i18n';
import Button from 'uikit/components/button/Button';
import Dropdown from 'uikit/components/dropdown/Dropdown';
import RepoCreateEditor from '../repo-create-editor/RepoCreateEditor';

export default function RepoCreateButton() {
    const [showsEditor, setShowsEditor] = useState(false);

    const buttonRef = useRef(null);

    return (
        <>
            <Button
                title={__('Create new Repo')}
                icon="plus"
                onClick={() => {
                    setShowsEditor(true);
                }}
                ref={buttonRef}
            />
            {showsEditor && buttonRef.current !== null && (
                <Dropdown
                    opener={buttonRef.current}
                    close={() => {
                        setShowsEditor(false);
                    }}
                >
                    <RepoCreateEditor
                        onSuccess={() => {
                            console.log('close editor on success');
                            setShowsEditor(false);
                        }}
                    />
                </Dropdown>
            )}
        </>
    );
}
