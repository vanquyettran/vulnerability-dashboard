import React from 'react';
import {render} from '@testing-library/react';
import NewRepo from './NewRepo';
import __ from 'main/i18n';
import userEvent from '@testing-library/user-event/dist';

describe('<NewRepo/>', () => {
    const myRender = () => {
        const screen = render(
            <NewRepo/>,
        );
        return {screen};
    };

    it('toggles textarea', () => {
        const {screen} = myRender();

        const addButton = screen.getByText(__('Add new repo'));
        expect(addButton).toBeInTheDocument();

        userEvent.click(addButton);

        const textarea = screen.getByPlaceholderText(__('Enter repo name'));
        expect(textarea).toBeInTheDocument();

        const cancelButton = screen.getByTitle(__('Cancel'));
        expect(cancelButton).toBeInTheDocument();

        userEvent.click(cancelButton);

        const textarea$ = screen.queryByPlaceholderText(__('Enter repo name'));
        expect(textarea$).not.toBeInTheDocument();
    });
});
