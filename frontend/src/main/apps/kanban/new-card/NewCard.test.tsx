import React from 'react';
import {render} from '@testing-library/react';
import NewCard from './NewCard';
import __ from 'main/i18n';
import userEvent from '@testing-library/user-event/dist';

describe('<NewCard/>', () => {
    const myRender = () => {
        const screen = render(
            <NewCard listId="a"/>,
        );
        return {screen};
    };

    it('toggles textarea', () => {
        const {screen} = myRender();

        const addButton = screen.getByText(__('Add new card'));
        expect(addButton).toBeInTheDocument();

        userEvent.click(addButton);

        const textarea = screen.getByPlaceholderText(__('Enter text for this card'));
        expect(textarea).toBeInTheDocument();

        const cancelButton = screen.getByTitle(__('Cancel'));
        expect(cancelButton).toBeInTheDocument();

        userEvent.click(cancelButton);

        const textarea$ = screen.queryByPlaceholderText(__('Enter text for this card'));
        expect(textarea$).not.toBeInTheDocument();
    });
});
