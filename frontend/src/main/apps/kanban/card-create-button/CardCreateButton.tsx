import './CardCreateButton.less';
import React, {useRef, useState} from 'react';
import __ from 'main/i18n';
import Button from 'uikit/components/button/Button';
import Dropdown from 'uikit/components/dropdown/Dropdown';
import CardCreateEditor from '../card-create-editor/CardCreateEditor';
import List from 'main/models/interfaces/List';

export default function CardCreateButton({listId}: {listId: List['id']}) {
    const [showsEditor, setShowsEditor] = useState(false);

    const buttonRef = useRef(null);

    return (
        <>
            <Button
                title={__('Create new Card')}
                icon="plus"
                onClick={() => {
                    setShowsEditor(true);
                }}
                ref={buttonRef}
            />
            {showsEditor && buttonRef.current !== null && (
                <Dropdown
                    opener={buttonRef.current}
                    close={() => {
                        setShowsEditor(false);
                    }}
                >
                    <CardCreateEditor
                        listId={listId}
                        onSuccess={() => {
                            setShowsEditor(false);
                        }}
                    />
                </Dropdown>
            )}
        </>
    );
}
