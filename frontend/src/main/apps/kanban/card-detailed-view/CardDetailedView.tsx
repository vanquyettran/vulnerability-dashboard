import './CardDetailedView.less';
import React, {useState} from 'react';
import ICard from 'main/models/interfaces/ICard';
import TextArea from 'uikit/components/text-area/TextArea';
import useCardActions from 'main/store/card/useCardActions';
import TextInput from 'uikit/components/text-input/TextInput';
import CardUpdateParcel from 'main/api/card/CardUpdateParcel';

export default function CardDetailedView(
    {
        card,
    }: {
        card: ICard
    }
) {

    const {ajaxDraftUpdate} = useCardActions();
    const [draftCard, setDraftCard] = useState({...card});

    return (
        <div className="CardDetailedView">
            <div className="card-text">
                <TextInput
                    value={draftCard.text}
                    setValue={text => {
                        setDraftCard(draftCard => ({...draftCard, text}));
                    }}
                    onBlur={() => {
                        ajaxDraftUpdate.run(new CardUpdateParcel(draftCard));
                    }}
                />
            </div>
            <div className="card-note">
                <TextArea
                    value={draftCard.note}
                    setValue={note => {
                        setDraftCard(draftCard => ({...draftCard, note}));
                    }}
                    onBlur={() => {
                        ajaxDraftUpdate.run(new CardUpdateParcel(draftCard));
                    }}
                />
            </div>
        </div>
    );
}
