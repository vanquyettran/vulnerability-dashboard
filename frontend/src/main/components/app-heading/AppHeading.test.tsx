import React from 'react';
import {render} from '@testing-library/react';
import AppHeading from './AppHeading';

describe('<AppHeading/>', () => {
    const myRender = (inProgress?: boolean) => {
        const title = 'Hello world!!!';
        const description = 'This is a description just for testing';

        const screen = render(
            <AppHeading
                title={title}
                description={description}
                inProgress={inProgress}
            />,
        );

        return {screen, title, description, inProgress};
    };

    it('renders title', () => {
        const {screen, title} = myRender();

        const element = screen.getByText(title);
        expect(element).toBeInTheDocument();
    });

    it('renders description', () => {
        const {screen, description} = myRender();

        const element = screen.getByText(description);
        expect(element).toBeInTheDocument();
    });

    it('no spinner by default', () => {
        const {screen} = myRender();

        const element = screen.queryByRole('progressbar');
        expect(element).not.toBeInTheDocument();
    });

    it('renders spinner if inProgress', () => {
        const {screen} = myRender(true);

        const element = screen.getByRole('progressbar');
        expect(element).toBeInTheDocument();
    });
});
