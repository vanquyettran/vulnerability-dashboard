import './ErrorTemplate.less';
import React from 'react';
import Button from 'uikit/components/button/Button';
import __ from '../../i18n';
import {useHistory} from 'react-router-dom';
import routes from 'main/routing/routes';

export default function ErrorTemplate(
    {
        title,
        description,
        actionType,
        className,
    }: {
        title: string,
        description: string,
        actionType: 'reload' | 'goBack',
        className?: string,
    },
) {
    const history = useHistory();

    const goBack = () => {
        if (history.length < 2) {
            history.push(routes.home.getUrl());
            return;
        }

        history.goBack();
    };

    const reload = () => {
        history.go(0);
    };

    const handleAction = () => {
        switch (actionType) {
            case 'reload':
                reload();
                break;
            case 'goBack':
                goBack();
                break;
        }
    };

    const getActionTitle = () => {
        switch (actionType) {
            case 'reload':
                return __('Reload');
            case 'goBack':
                return __('Go back');
        }
    };

    const getActionIcon = () => {
        switch (actionType) {
            case 'reload':
                return 'redo';
            case 'goBack':
                return 'arrow-left';
        }
    };

    return (
        <div className={{default: 'ErrorTemplate', global: className}}>
            <div className="title">{title}</div>
            <div className="description">{description}</div>
            <div className="actions">
                <Button
                    title={getActionTitle()}
                    icon={getActionIcon()}
                    onClick={handleAction}
                    appearance="solid-primary"
                    size="large"
                />
            </div>
        </div>
    );
}
