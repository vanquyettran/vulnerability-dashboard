import {useSetRecoilState} from 'recoil';
import {listData} from './atoms';
import {ListDataManipulation} from 'main/store/interfaces';
import useAjaxList from 'main/store/ajax-actions/useAjaxList';
import useAjaxRead from 'main/store/ajax-actions/useAjaxRead';
import useAjaxCreate from 'main/store/ajax-actions/useAjaxCreate';
import useAjaxUpdate from 'main/store/ajax-actions/useAjaxUpdate';
import useAjaxDraftUpdate from 'main/store/ajax-actions/useAjaxDraftUpdate';
import useAjaxDelete from 'main/store/ajax-actions/useAjaxDelete';
import manipulateData from 'main/store/manipulateData';

export default function useListActions(): ListDataManipulation {
    const {addOrReplace, update, removeById} = manipulateData(useSetRecoilState(listData));

    return {
        ajaxList: useAjaxList(addOrReplace),
        ajaxRead: useAjaxRead(addOrReplace),
        ajaxCreate: useAjaxCreate(addOrReplace),
        ajaxUpdate: useAjaxUpdate(update),
        ajaxDraftUpdate: useAjaxDraftUpdate(update),
        ajaxDelete: useAjaxDelete(removeById, (deletedList, callback) => {
            // TODO: Implement DELETE CASCADE
            callback();
        }),
    };
}
