import {useSetRecoilState} from 'recoil';
import {listData} from '../__internals__/atoms';
import {ListDataManipulation} from 'main/store/interfaces';
import useAjaxList from '../__internals__/ajax-actions/useAjaxList';
import useAjaxRead from '../__internals__/ajax-actions/useAjaxRead';
import useAjaxCreate from '../__internals__/ajax-actions/useAjaxCreate';
import useAjaxUpdate from '../__internals__/ajax-actions/useAjaxUpdate';
import useAjaxBackgroundUpdate from '../__internals__/ajax-actions/useAjaxBackgroundUpdate';
import useAjaxDelete from '../__internals__/ajax-actions/useAjaxDelete';
import manipulateData from '../__internals__/manipulateData';

export default function useListActions(): ListDataManipulation {
    const {addOrReplace, update, removeById} = manipulateData(useSetRecoilState(listData));

    return {
        ajaxList: useAjaxList(addOrReplace),
        ajaxRead: useAjaxRead(addOrReplace),
        ajaxCreate: useAjaxCreate(addOrReplace),
        ajaxUpdate: useAjaxUpdate(update),
        ajaxBackgroundUpdate: useAjaxBackgroundUpdate(update),
        ajaxDelete: useAjaxDelete(removeById, (deletedList, callback) => {
            // TODO: Implement DELETE CASCADE
            callback();
        }),
    };
}
