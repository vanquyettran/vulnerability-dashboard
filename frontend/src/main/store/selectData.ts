import {useCallback, useMemo} from 'react';
import {EntityDataSource, EntityData} from './interfaces';
import Entity from 'main/models/interfaces/Entity';

export default function selectData<T extends Entity>(data: EntityDataSource<T>): EntityData<T> {

    const entities = useMemo(() => data.allIds.map(id => data.byId[id]), [data]);

    const findById = useCallback((id: T['id']): T | undefined => data.byId[id], [data]);

    return {
        entities,
        allIds: data.allIds,
        findById,
    };
}
